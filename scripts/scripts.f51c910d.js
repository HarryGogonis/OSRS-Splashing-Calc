"use strict";angular.module("osrssplashCalcApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(t){t.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("osrssplashCalcApp").controller("MainCtrl",["$http","$scope",function(o,a){var t="https://api.rsbuddy.com/grandExchange?a=guidePrice&i=",e=1200,r=11.5,l=22.5,d=34.5,s=42.5,n=function(t){return e*t},c=function(t){return e*t},p=function(t,o){for(var e=0,r=1;r<t;r++)e+=Math.floor(r+300*Math.pow(2,r/7));return Math.floor(e/4)-o},i=function(){var t=Math.ceil(a.xp.left/a.mind.xp);a.mind.totalCost=a.mind.gp*t,a.mind.castsLeft=t,a.mind.timeLeft=t/e},m=function(){var t=Math.ceil(a.xp.left/a.chaos.xp);a.chaos.totalCost=a.chaos.gp*t,a.chaos.castsLeft=t,a.chaos.timeLeft=t/e},u=function(){var t=Math.ceil(a.xp.left/a.death.xp);a.death.totalCost=a.death.gp*t,a.death.castsLeft=t,a.death.timeLeft=t/e},b=function(){var t=Math.ceil(a.xp.left/a.blood.xp);a.blood.totalCost=a.blood.gp*t,a.blood.castsLeft=t,a.blood.timeLeft=t/e},g=function(){i(),m(),u(),b()};a.xp={current:1e6,target:94,left:0},a.mind={gp:0,xp:r,xpHr:n(r),gpHr:0,totalCost:0,castsLeft:0,timeLeft:0},a.chaos={gp:0,xp:l,xpHr:n(l),gpHr:0,totalCost:0,castsLeft:0,timeLeft:0},a.death={gp:0,xp:d,xpHr:n(d),gpHr:0,totalCost:0,castsLeft:0},a.blood={gp:0,xp:s,xpHr:n(s),gpHr:0,totalCost:0,castsLeft:0},a.player=window.localStorage.getItem("player")||"",a.lookupPlayer=function(){if(a.player){var t="https://cors-proxy.htmldriven.com/?url=http://services.runescape.com/m=hiscore_oldschool/index_lite.ws?player="+a.player;o.get(t).then(function(t){var o=t.data&&t.data.body&&t.data.body.split(",");if(o&&!(o.length<17)){var e=parseInt(o[15],10),r=o[16].split("\n")[0];e>a.xp.target&&(a.xp.target=e+1),a.xp.current=parseInt(r,10)}},function(t){console.log(t)})}},a.$watch("mind.gp",function(){a.mind.gpHr=c(a.mind.gp),i()}),a.$watch("chaos.gp",function(){a.chaos.gpHr=c(a.chaos.gp),m()}),a.$watch("death.gp",function(){a.death.gpHr=c(a.death.gp),u()}),a.$watch("blood.gp",function(){a.blood.gpHr=c(a.blood.gp),b()}),a.$watch("xp.current",function(){a.xp.left=p(a.xp.target,a.xp.current),g()}),a.$watch("xp.target",function(){a.xp.left=p(a.xp.target,a.xp.current),g()}),a.$watch("player",function(){window.localStorage.setItem("player",a.player)}),o.get(t+"558").then(function(t){a.mind.gp=t.data.overall},function(t){console.log(t)}),o.get(t+"562").then(function(t){a.chaos.gp=t.data.overall},function(t){console.log(t)}),o.get(t+"560").then(function(t){a.death.gp=t.data.overall},function(t){console.log(t)}),o.get(t+"565").then(function(t){a.blood.gp=t.data.overall},function(t){console.log(t)}),a.lookupPlayer()}]),angular.module("osrssplashCalcApp").run(["$templateCache",function(t){t.put("views/main.html",'<div class="row"> <div class="col-md-12"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-2 control-label">Lookup player</label> <div class="col-sm-10"> <div class="input-group"> <input type="text" class="form-control" placeholder="Speedy1" ng-model="player"> <span class="input-group-btn"> <button class="btn btn-default" type="button" ng-click="lookupPlayer()" ng-disabled="!player">Lookup</button> </span> </div> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">Current Mage XP</label> <div class="col-sm-10"> <input type="number" class="form-control" placeholder="0" ng-model="xp.current"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">Target Level</label> <div class="col-sm-10"> <input type="number" class="form-control" placeholder="60" max="99" ng-model="xp.target"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">XP Left</label> <div class="col-sm-10"> <p class="form-control-static">{{xp.left | number}} XP</p> </div> </div> </form> </div> </div> <div class="row"> <div class="col-md-6"> <h4><img src="http://cdn.rsbuddy.com/items/558.png"> Fire Strike ({{mind.gp}} GP)</h4> <table class="table"> <tr> <td><b>Casts Left</b></td> <td><b>{{mind.castsLeft | number}}</b></td> </tr> <tr> <td>Total Cost</td> <td>{{mind.totalCost | number }} GP</td> </tr> <tr> <td>Xp/Hr</td> <td>{{mind.xpHr | number }}</td> </tr> <tr> <td>Gp/Hr</td> <td>{{mind.gpHr | number }}</td> </tr> <tr> <td>Time Left</td> <td>{{mind.timeLeft | number }} Hours</td> </tr> </table> </div> <div class="col-md-6"> <h4><img src="http://cdn.rsbuddy.com/items/562.png"> Fire Bolt ({{chaos.gp}} GP)</h4> <table class="table"> <tr> <td><b>Casts Left</b></td> <td><b>{{chaos.castsLeft | number}}</b></td> </tr> <tr> <td>Total Cost</td> <td>{{chaos.totalCost | number }} GP</td> </tr> <tr> <td>Xp/Hr</td> <td>{{chaos.xpHr | number }}</td> </tr> <tr> <td>Gp/Hr</td> <td>{{chaos.gpHr | number }}</td> </tr> <tr> <td>Time Left</td> <td>{{chaos.timeLeft | number }} Hours</td> </tr> </table> </div> <div class="col-md-6"> <h4><img src="http://cdn.rsbuddy.com/items/560.png"> Fire Blast ({{death.gp}} GP)</h4> <table class="table"> <tr> <td><b>Casts Left</b></td> <td><b>{{death.castsLeft | number}}</b></td> </tr> <tr> <td>Total Cost</td> <td>{{death.totalCost | number }} GP</td> </tr> <tr> <td>Xp/Hr</td> <td>{{death.xpHr | number }}</td> </tr> <tr> <td>Gp/Hr</td> <td>{{death.gpHr | number }}</td> </tr> <tr> <td>Time Left</td> <td>{{death.timeLeft | number }} Hours</td> </tr> </table> </div> <div class="col-md-6"> <h4><img src="http://cdn.rsbuddy.com/items/565.png"> Fire Wave ({{blood.gp}} GP)</h4> <table class="table"> <tr> <td><b>Casts Left</b></td> <td><b>{{blood.castsLeft | number}}</b></td> </tr> <tr> <td>Total Cost</td> <td>{{blood.totalCost | number }} GP</td> </tr> <tr> <td>Xp/Hr</td> <td>{{blood.xpHr | number }}</td> </tr> <tr> <td>Gp/Hr</td> <td>{{blood.gpHr | number }}</td> </tr> <tr> <td>Time Left</td> <td>{{blood.timeLeft | number }} Hours</td> </tr> </table> </div> </div> ')}]);