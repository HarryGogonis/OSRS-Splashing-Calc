"use strict";angular.module("osrssplashCalcApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("osrssplashCalcApp").controller("MainCtrl",["$http","$scope",function(a,b){var c="https://cors-proxy.htmldriven.com/?url=http://services.runescape.com/m=hiscore_oldschool/index_lite.ws?player=",d="https://api.rsbuddy.com/grandExchange?a=guidePrice&i=",e=1200,f={mind:11.5,chaos:22.5,death:34.5,blood:42.5},g=function(a){return e*a},h=function(a){return e*a},i=function(a,b){for(var c=0,d=1;a>d;d++)c+=Math.floor(d+300*Math.pow(2,d/7));var e=Math.floor(c/4);return e-b},j=function(){var a=Math.ceil(b.xp.left/b.mind.xp);b.mind.totalCost=b.mind.gp*a,b.mind.castsLeft=a,b.mind.timeLeft=a/e},k=function(){var a=Math.ceil(b.xp.left/b.chaos.xp);b.chaos.totalCost=b.chaos.gp*a,b.chaos.castsLeft=a,b.chaos.timeLeft=a/e},l=function(){var a=Math.ceil(b.xp.left/b.death.xp);b.death.totalCost=b.death.gp*a,b.death.castsLeft=a,b.death.timeLeft=a/e},m=function(){var a=Math.ceil(b.xp.left/b.blood.xp);b.blood.totalCost=b.blood.gp*a,b.blood.castsLeft=a,b.blood.timeLeft=a/e},n=function(){j(),k(),l(),m()};b.xp={current:1e6,target:94,left:0},b.mind={gp:0,xp:f.mind,xpHr:g(f.mind),gpHr:0,totalCost:0,castsLeft:0,timeLeft:0},b.chaos={gp:0,xp:f.chaos,xpHr:g(f.chaos),gpHr:0,totalCost:0,castsLeft:0,timeLeft:0},b.death={gp:0,xp:f.death,xpHr:g(f.death),gpHr:0,totalCost:0,castsLeft:0},b.blood={gp:0,xp:f.blood,xpHr:g(f.blood),gpHr:0,totalCost:0,castsLeft:0},b.player=window.localStorage.getItem("player")||"",b.lookupPlayer=function(){if(b.player){var d=c+b.player;a.get(d).then(function(a){var c=a.data&&a.data.body&&a.data.body.split(",");if(c&&!(c.length<17)){var d=parseInt(c[15],10),e=c[16].split("\n")[0];d>b.xp.target&&(b.xp.target=d+1),b.xp.current=parseInt(e,10)}},function(a){console.log(a)})}},b.$watch("mind.gp",function(){b.mind.gpHr=h(b.mind.gp),j()}),b.$watch("chaos.gp",function(){b.chaos.gpHr=h(b.chaos.gp),k()}),b.$watch("death.gp",function(){b.death.gpHr=h(b.death.gp),l()}),b.$watch("blood.gp",function(){b.blood.gpHr=h(b.blood.gp),m()}),b.$watch("xp.current",function(){b.xp.left=i(b.xp.target,b.xp.current),n()}),b.$watch("xp.target",function(){b.xp.left=i(b.xp.target,b.xp.current),n()}),b.$watch("player",function(){window.localStorage.setItem("player",b.player)}),a.get(d+"558").then(function(a){b.mind.gp=a.data.overall},function(a){console.log(a)}),a.get(d+"562").then(function(a){b.chaos.gp=a.data.overall},function(a){console.log(a)}),a.get(d+"560").then(function(a){b.death.gp=a.data.overall},function(a){console.log(a)}),a.get(d+"565").then(function(a){b.blood.gp=a.data.overall},function(a){console.log(a)}),b.lookupPlayer()}]),angular.module("osrssplashCalcApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="row"> <div class="col-md-12"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-2 control-label">Lookup player</label> <div class="col-sm-10"> <div class="input-group"> <input type="text" class="form-control" placeholder="Speedy1" ng-model="player"> <span class="input-group-btn"> <button class="btn btn-default" type="button" ng-click="lookupPlayer()" ng-disabled="!player">Lookup</button> </span> </div> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">Current Mage XP</label> <div class="col-sm-10"> <input type="number" class="form-control" placeholder="0" ng-model="xp.current"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">Target Level</label> <div class="col-sm-10"> <input type="number" class="form-control" placeholder="60" max="99" ng-model="xp.target"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">XP Left</label> <div class="col-sm-10"> <p class="form-control-static">{{xp.left | number}} XP</p> </div> </div> </form> </div> </div> <div class="row"> <div class="col-md-6"> <h4><img src="http://cdn.rsbuddy.com/items/558.png"> Fire Strike ({{mind.gp}} GP)</h4> <table class="table"> <tr> <td><b>Casts Left</b></td> <td><b>{{mind.castsLeft | number}}</b></td> </tr> <tr> <td>Total Cost</td> <td>{{mind.totalCost | number }} GP</td> </tr> <tr> <td>Xp/Hr</td> <td>{{mind.xpHr | number }}</td> </tr> <tr> <td>Gp/Hr</td> <td>{{mind.gpHr | number }}</td> </tr> <tr> <td>Time Left</td> <td>{{mind.timeLeft | number }} Hours</td> </tr> </table> </div> <div class="col-md-6"> <h4><img src="http://cdn.rsbuddy.com/items/562.png"> Fire Bolt ({{chaos.gp}} GP)</h4> <table class="table"> <tr> <td><b>Casts Left</b></td> <td><b>{{chaos.castsLeft | number}}</b></td> </tr> <tr> <td>Total Cost</td> <td>{{chaos.totalCost | number }} GP</td> </tr> <tr> <td>Xp/Hr</td> <td>{{chaos.xpHr | number }}</td> </tr> <tr> <td>Gp/Hr</td> <td>{{chaos.gpHr | number }}</td> </tr> <tr> <td>Time Left</td> <td>{{chaos.timeLeft | number }} Hours</td> </tr> </table> </div> <div class="col-md-6"> <h4><img src="http://cdn.rsbuddy.com/items/560.png"> Fire Blast ({{death.gp}} GP)</h4> <table class="table"> <tr> <td><b>Casts Left</b></td> <td><b>{{death.castsLeft | number}}</b></td> </tr> <tr> <td>Total Cost</td> <td>{{death.totalCost | number }} GP</td> </tr> <tr> <td>Xp/Hr</td> <td>{{death.xpHr | number }}</td> </tr> <tr> <td>Gp/Hr</td> <td>{{death.gpHr | number }}</td> </tr> <tr> <td>Time Left</td> <td>{{death.timeLeft | number }} Hours</td> </tr> </table> </div> <div class="col-md-6"> <h4><img src="http://cdn.rsbuddy.com/items/565.png"> Fire Wave ({{blood.gp}} GP)</h4> <table class="table"> <tr> <td><b>Casts Left</b></td> <td><b>{{blood.castsLeft | number}}</b></td> </tr> <tr> <td>Total Cost</td> <td>{{blood.totalCost | number }} GP</td> </tr> <tr> <td>Xp/Hr</td> <td>{{blood.xpHr | number }}</td> </tr> <tr> <td>Gp/Hr</td> <td>{{blood.gpHr | number }}</td> </tr> <tr> <td>Time Left</td> <td>{{blood.timeLeft | number }} Hours</td> </tr> </table> </div> </div>')}]);